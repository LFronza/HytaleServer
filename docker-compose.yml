version: '3.8'

services:
  hytale:
    build: .
    image: hytale-server:latest
    container_name: hytale-server
    restart: unless-stopped
    ports:
      - "30000-30010:30000-30010/udp"
      - "30000-30010:30000-30010/tcp"
    environment:
      - BACKUP_INTERVAL=900 # 15 minutes
      - JAVA_OPTS=-Xms2G -Xmx6G
    volumes:
      # Data persistence: Only mount dynamic directories, otherwise we hide the baked-in assets
      - ./data/world:/hytale/world
      - ./data/config.json:/hytale/config.json
      - ./data/mods:/hytale/mods
      - ./data/backups:/backups
      - ./data/import:/import
